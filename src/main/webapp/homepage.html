<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
		<title></title>
		<link type="text/css" rel="stylesheet" href="css/common-style.css">
	</head>
	<body>
		<header class="header box-layout center-v">
			<div class="logo"><i class="mode-icon"></i></div>
			<a href="#" class="home-link"></a>
			<div class="box-col"><a href="" class="avatar"></a></div>
		</header>
		<script src="js/switch-mode.js"></script>
		
		<section class="wrapper mt-64">
			<ul class="recordings-list">
				<li>Recordings</li>
				<li id="title" class="box-layout">
					<div class="box-col">#</div>
					<div class="box-col">Start time</div>
					<div class="box-col">End time</div>
					<div class="box-col">Resolution</div>
					<div class="box-col">Frame rate</div>
				</li>
			</ul>
		</section>
		<script>
			let xmlhttp = new XMLHttpRequest();
			xmlhttp.onreadystatechange = function() {
				if (this.readyState == 4 && this.status == 200) {
					var response = this.responseText,
						recordings = JSON.parse(response),
						htmlStr = "";
					for(var recording of recordings) {
						var id = recording.recordingID;
						htmlStr += '<li>'
										+ '<a href="recording.html?id=' + id + '" class="box-layout">'
										+ '<div class="box-col">Sensor' + (id > 9 ? id : ('0' + id) + "_" + recording.date) + '</div>'
										+ '<div class="box-col">' + recording.startTime + '</div>'
										+ '<div class="box-col">' + recording.endTime + '</div>'
										+ '<div class="box-col">' + recording.resolution + '</div>'
										+ '<div class="box-col">' + recording.frameRate + '</div>'
										+ '</a>'
									+ '</li>'
					}
					document.querySelector("#title").insertAdjacentHTML("afterend", htmlStr);
				}
			}
			xmlhttp.open("GET", "/MindhashApp/rest/recordings", true);
			xmlhttp.setRequestHeader("Accept", "application/json");
			xmlhttp.send();
		</script>
	</body>
</html>
